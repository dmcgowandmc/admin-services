"Resources": {
		"S3Utilities": {
			"Type" : "AWS::S3::Bucket",
			"Properties" : {
				"BucketName" : {
					"Fn::Join": ["-", [
							{"Ref": "HACMSName"},
							"s3-utilities"
						]
					]
				},
				"Tags" : [{ 
					"Key": "Name",
					"Value": {
						"Fn::Join": ["-", [
								{"Ref": "HACMSName"},
								"s3-utilities"
							]
						]
					}
				},
				{
					"Key": "Description",
					"Value": "Contains code and artifacts to be used by various resources. Typically code is unencrypted and artifacts are encrypted due to potential sensitive information"
				}]
			}
		},
		"S3UtilitiesPolicy": {
			"Type" : "AWS::S3::BucketPolicy",
			"Properties" : {
				"Bucket": {
					"Fn::Join": ["-", [
							{"Ref": "HACMSName"},
							"s3-utilities"
						]
					]
				},
				"PolicyDocument": {
					"Id": "S3UtilitiesPolicy",
					"Version": "2012-10-17",
					"Statement": [
						{
							"Sid": "UtilityReadAccess",
							"Action": [
								"s3:ListBucket",
								"s3:GetObject",
								"s3:GetObjectTagging",
								"s3:GetObjectVersion"
							],
							"Effect": "Allow",
							"Resource": [
								{
									"Fn::Join": ["", [
										"arn:aws:s3:::",{
											"Fn::Join": ["-", [
													{"Ref": "HACMSName"},
													"s3-utilities"
												]
											]
										}]
									]
								},
								{
									"Fn::Join": ["", [
										"arn:aws:s3:::",{
											"Fn::Join": ["-", [
													{"Ref": "HACMSName"},
													"s3-utilities"
												]
											]
										},
										"/bootstrap/*"]
									]
								},
								{
									"Fn::Join": ["", [
										"arn:aws:s3:::",{
											"Fn::Join": ["-", [
													{"Ref": "HACMSName"},
													"s3-utilities"
												]
											]
										},
										"/resources/*"]
									]
								}
							],
							"Principal": {
								"AWS": [{
									"Fn::Join": ["-", [
											{"Ref": "HACMSName"},
											"role-ec2tos3-user"
										]
									]
								}]
							}
						},
						{
							"Sid": "UtilityWriteAccess",
							"Action": [
								"s3:PutObject"
							],
							"Effect": "Allow",
							"Resource": [
								{
									"Fn::Join": ["", [
										"arn:aws:s3:::",{
											"Fn::Join": ["-", [
													{"Ref": "HACMSName"},
													"s3-utilities"
												]
											]
										},
										"/resources/*"]
									]
								}
							],
							"Principal": {
								"AWS": [{
									"Fn::Join": ["-", [
											{"Ref": "HACMSName"},
											"role-ec2tos3-admin"
										]
									]
								}]
							}
						}
					]
				}
			},
			"DependsOn": [
				"S3Utilities"
			]
		}
	}